# Airflow & Salesforce Data Loader Integration Concerns

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ô‡∏≥ **Salesforce Data Loader CLI** ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö **Apache Airflow** (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° Docker/Kubernetes)

## 1. Execution Environment (‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô) ‚ö†Ô∏è

Data Loader ‡πÄ‡∏õ‡πá‡∏ô Java Application ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô Environment ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Java

* **Java Runtime (JRE) Requirement**:
  * Image ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Airflow (Official Images) ‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ Java ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢
  * **Solution**: ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Custom Docker Image ‡πÇ‡∏î‡∏¢ Extend ‡∏à‡∏≤‡∏Å Airflow Image ‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° Command ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Java:

        ```dockerfile
        FROM apache/airflow:2.x
        USER root
        RUN apt-get update && apt-get install -y openjdk-17-jre
        USER airflow
        ```

* **Data Loader Installation**:
  * ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå Program Data Loader ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Image ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£ Mount Volume ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå Program ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/opt/dataloader` (‡∏´‡∏£‡∏∑‡∏≠ path ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î)

## 2. File Path & Volume Mounting üìÇ

‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Path ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô Container Environment

* **Consistency**:
  * Path ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô `process-conf.xml` (‡πÄ‡∏ä‡πà‡∏ô `/opt/shared/data.csv`) ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Path ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß **Airflow Worker** ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á
* **Shared Volume**:
  * Task ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (Python Operator) ‡∏à‡∏∞ Generate CSV ‡∏•‡∏á Disk
  * Task ‡∏ñ‡∏±‡∏î‡∏°‡∏≤ (Bash Operator ‡∏£‡∏±‡∏ô Data Loader) ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏±‡πâ‡∏ô
  * **Solution**: ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Shared Volume (PVC ‡∏´‡∏£‡∏∑‡∏≠ Host Mount) ‡∏£‡∏∏‡∏°‡∏ó‡∏µ‡πà `/opt/airflow/data` ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡∏•‡∏≤‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Task/Container

## 3. Security & Credentials üîê

‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ Key File

* **Encryption Key File**:
  * ‡πÑ‡∏ü‡∏•‡πå `key.txt` ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Decrypt Password ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å ‡∏´‡πâ‡∏≤‡∏°‡∏´‡∏≤‡∏¢
  * ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Path ‡∏ó‡∏µ‡πà Secure ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô config ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á
* **Secrets Management**:
  * ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£ Hardcode Password ‡∏´‡∏£‡∏∑‡∏≠ Sensitive Path ‡πÉ‡∏ô Code
  * **Recommendation**: ‡πÉ‡∏ä‡πâ Airflow Connections ‡∏´‡∏£‡∏∑‡∏≠ Variables ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ Python Script Generate ‡πÑ‡∏ü‡∏•‡πå `process-conf.xml` ‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Dynamic Config) ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Data Loader ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î

## 4. Error Handling & Monitoring üîÑ

Data Loader ‡∏°‡∏µ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Exit Code ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á

* **Exit Codes**:
  * Data Loader ‡∏≠‡∏≤‡∏à return code `0` (Success) ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏ö‡∏≤‡∏á record error (Partial Success)
  * **Solution**: ‡∏´‡πâ‡∏≤‡∏°‡∏î‡∏π‡πÅ‡∏Ñ‡πà Exit Code **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Logic ‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏ü‡∏•‡πå Error Log** (`status-error.csv`) ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
  * ‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå Error ‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î > 1) ‡πÉ‡∏´‡πâ Raise Exception ‡πÉ‡∏ô Airflow ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Task Failed

## 5. Resource Management üöÄ

* **Memory Usage**:
  * Java Process ‡∏Å‡∏¥‡∏ô RAM ‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏¢‡∏≠‡∏∞ ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Data Loader ‡∏´‡∏•‡∏≤‡∏¢‡πÜ Job ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏ö‡∏ô Worker 1 ‡∏ï‡∏±‡∏ß ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î **OOM (Out Of Memory) Killed** ‡πÑ‡∏î‡πâ
  * ‡∏Ñ‡∏ß‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î Concurrency ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏π‡∏ô Heap Size ‡∏Ç‡∏≠‡∏á Java (`-Xmx`) ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
* **API Limits**:
  * ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏°‡∏≤‡∏Å (Bulk) ‡∏à‡∏∞‡∏Å‡∏¥‡∏ô‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ **Bulk API Jobs** ‡∏Ç‡∏≠‡∏á Salesforce (‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠ 24 ‡∏ä‡∏°.)
  * ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô Batch Size ‡πÉ‡∏´‡πâ‡∏î‡∏µ (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 10,000 records/batch ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Bulk V1) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤
